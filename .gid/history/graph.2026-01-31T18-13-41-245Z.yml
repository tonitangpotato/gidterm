metadata:
  project: gidterm
  version: 0.2.0
  description: Graph-Driven Semantic Terminal Controller
  repository: https://github.com/tonitangpotato/gidterm
nodes:
  CoreEngine:
    type: Feature
    description: Core engine library - graph parsing, PTY management, task scheduling, execution
    status: active
    priority: core
  SemanticLayer:
    type: Feature
    description: Semantic understanding of task output - parsers, metrics extraction, commands
    status: in_progress
    priority: core
  TerminalUI:
    type: Feature
    description: Terminal UI with live dashboard, graph view, and terminal view
    status: in_progress
    priority: core
  MultiProjectWorkspace:
    type: Feature
    description: Multi-project workspace discovery and unified management
    status: active
    priority: supporting
  SessionPersistence:
    type: Feature
    description: Session persistence and task history tracking across runs
    status: active
    priority: supporting
  GraphParser:
    type: Component
    description: Parse .gid/graph.yml and build task DAG
    layer: domain
    status: active
    path: src/core/graph.rs
  PTYManager:
    type: Component
    description: PTY creation, I/O handling, signal control
    layer: infrastructure
    status: active
    path: src/core/pty.rs
  Scheduler:
    type: Component
    description: Task dependency scheduling and execution ordering
    layer: application
    status: active
    path: src/core/scheduler.rs
  Executor:
    type: Component
    description: Task executor with PTY lifecycle management and spawn_blocking I/O
    layer: application
    status: active
    path: src/core/executor.rs
  ParserRegistry:
    type: Component
    description: Register and manage output parsers, auto-detect parser for task type
    layer: application
    status: active
    path: src/semantic/registry.rs
  RegexParser:
    type: Component
    description: Regex-based progress extraction (percentages, fractions, progress bars)
    layer: application
    status: active
    path: src/semantic/parsers/regex.rs
  MLTrainingParser:
    type: Component
    description: Parse ML training output (epoch, loss, accuracy, learning rate)
    layer: application
    status: active
    path: src/semantic/parsers/ml_training.rs
  BuildParser:
    type: Component
    description: Parse build task output (compilation steps, warnings, errors)
    layer: application
    status: draft
    path: src/semantic/parsers/build.rs
  SemanticCommands:
    type: Component
    description: Template-based semantic command execution from graph YAML
    layer: application
    status: draft
    path: src/semantic/commands.rs
  TUIController:
    type: Component
    description: Terminal UI controller using ratatui + crossterm
    layer: interface
    status: active
    path: src/ui/mod.rs
  LiveDashboard:
    type: Component
    description: Live dashboard with task list, progress bars, metrics, output panel
    layer: interface
    status: active
    path: src/ui/live.rs
  DashboardView:
    type: Component
    description: Rich dashboard with full metrics, project grouping, ETA
    layer: interface
    status: draft
    path: src/ui/dashboard.rs
  GraphView:
    type: Component
    description: Visual DAG view of task dependencies in TUI
    layer: interface
    status: draft
  TerminalView:
    type: Component
    description: Full-screen terminal view with semantic controls
    layer: interface
    status: draft
  AppState:
    type: Component
    description: Application state, event loop, key handling
    layer: application
    status: active
    path: src/app.rs
  SessionManager:
    type: Component
    description: Session persistence and history tracking in .gidterm/sessions/
    layer: infrastructure
    status: active
    path: src/session.rs
  WorkspaceManager:
    type: Component
    description: Multi-project workspace discovery and unified graph creation
    layer: application
    status: active
    path: src/workspace.rs
  UnitTests:
    type: Test
    description: Unit tests for core, semantic, and session modules
    status: active
  IntegrationTests:
    type: Test
    description: End-to-end integration tests with real commands
    status: draft
edges:
  - from: GraphParser
    to: CoreEngine
    relation: implements
  - from: PTYManager
    to: CoreEngine
    relation: implements
  - from: Scheduler
    to: CoreEngine
    relation: implements
  - from: Executor
    to: CoreEngine
    relation: implements
  - from: ParserRegistry
    to: SemanticLayer
    relation: implements
  - from: RegexParser
    to: SemanticLayer
    relation: implements
  - from: MLTrainingParser
    to: SemanticLayer
    relation: implements
  - from: BuildParser
    to: SemanticLayer
    relation: implements
  - from: SemanticCommands
    to: SemanticLayer
    relation: implements
  - from: TUIController
    to: TerminalUI
    relation: implements
  - from: LiveDashboard
    to: TerminalUI
    relation: implements
  - from: DashboardView
    to: TerminalUI
    relation: implements
  - from: GraphView
    to: TerminalUI
    relation: implements
  - from: TerminalView
    to: TerminalUI
    relation: implements
  - from: WorkspaceManager
    to: MultiProjectWorkspace
    relation: implements
  - from: SessionManager
    to: SessionPersistence
    relation: implements
  - from: Scheduler
    to: GraphParser
    relation: depends_on
  - from: Executor
    to: PTYManager
    relation: depends_on
  - from: Executor
    to: Scheduler
    relation: depends_on
  - from: RegexParser
    to: ParserRegistry
    relation: depends_on
  - from: MLTrainingParser
    to: ParserRegistry
    relation: depends_on
  - from: BuildParser
    to: ParserRegistry
    relation: depends_on
  - from: SemanticCommands
    to: ParserRegistry
    relation: depends_on
  - from: LiveDashboard
    to: TUIController
    relation: depends_on
  - from: DashboardView
    to: TUIController
    relation: depends_on
  - from: GraphView
    to: TUIController
    relation: depends_on
  - from: TerminalView
    to: TUIController
    relation: depends_on
  - from: AppState
    to: Executor
    relation: depends_on
  - from: AppState
    to: Scheduler
    relation: depends_on
  - from: AppState
    to: ParserRegistry
    relation: depends_on
  - from: AppState
    to: SessionManager
    relation: depends_on
  - from: WorkspaceManager
    to: GraphParser
    relation: depends_on
  - from: GraphParser
    to: UnitTests
    relation: tested_by
  - from: RegexParser
    to: UnitTests
    relation: tested_by
  - from: MLTrainingParser
    to: UnitTests
    relation: tested_by
  - from: ParserRegistry
    to: UnitTests
    relation: tested_by
  - from: SessionManager
    to: UnitTests
    relation: tested_by
  - from: SemanticLayer
    to: CoreEngine
    relation: requires
  - from: TerminalUI
    to: CoreEngine
    relation: requires
  - from: TerminalUI
    to: SemanticLayer
    relation: requires
  - from: MultiProjectWorkspace
    to: CoreEngine
    relation: requires
  - from: AppState
    to: CoreEngine
    relation: implements
  - from: IntegrationTests
    to: CoreEngine
    relation: validates
  - from: IntegrationTests
    to: SemanticLayer
    relation: validates
